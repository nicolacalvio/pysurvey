Index: pysurvey/app/templates/my-account.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{% extends \"base.html\" %}\r\n{% block content %}\r\n    <div class=\"h-full flex\">\r\n\r\n    {% if username %}\r\n            <div class=\" flex justify-center pr-4 w-2/5 m-3 \" >\r\n               <div class=\"justify-center flex flex-col\">\r\n                  <div class=\"w-full flex justify-center \">\r\n                     <div class=\"border-4 rounded-full border-black\">\r\n                        <img class=\" h-60 inline  p-2\" src=\"{{ immagine }}\" >\r\n                     </div>\r\n                  </div>\r\n                  <h1 id=\"usernameProfilo\" class=\"font-medium justify-start text-2xl\"> {{ username }}!</h1>\r\n               </div>\r\n            </div>\r\n            <div class=\" w-full flex  items-center p-4  \">\r\n               <div class=\"w-full flex flex-col justify-center ml-5\">\r\n                  <div class=\"m-4 flex w-full ml-4  \">\r\n                     <div class=\"flex flex-col w-1/2\">\r\n                        <div id=\"username\" class=\"font-medium justify-start text-2xl\"> {{ username }}</div>\r\n                        <div id=\"userplaceholder\">  username </div>\r\n                     </div>\r\n                     <div class=\"flex flex-col w-1/2\">\r\n                        <div id=\"mail\" class=\"font-medium justify-start text-2xl\"> {{ mail }}</div>\r\n                        <div id=\"mailplaceholder\">  mail </div>\r\n                     </div>\r\n                  </div>\r\n                   <div id=\"boxnazionalita\" class=\"m-4 flex w-full ml-4  \">\r\n                       <div class=\"flex flex-col w-1/2\">\r\n                        <div id=\"nazionalita\" class=\"font-medium justify-start text-2xl\"> {{ nazionalita }}</div>\r\n                        <div id=\"nazionalitaplaceholder\">  nazionalità </div>\r\n                     </div>\r\n                   </div>\r\n                  <div class =\"m-4\">\r\n                     <div id=\"boxmodificanazionalita\" class=\"hidden col-span-6 w-1/2 sm:col-span-3\">\r\n                        <label for=\"country\" class=\"block font-medium text-gray-700\">Nazionalità</label>\r\n                        <select id=\"country\" name=\"country\" autocomplete=\"country\" class=\"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\">\r\n                           <option>Italiana</option>\r\n                           <option>Americana</option>\r\n                           <option>Mexicana</option>\r\n                        </select>\r\n                     </div>\r\n                  </div>\r\n                  <div class=\"m-4 flex flex-row-reverse p-8\">\r\n                     <button class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold p-4 m-1 w-2/12 rounded-full\" id=\"modifica\">Modifica</button>\r\n                     <!-- <h1 class=\"text-2xl\"> ciccio@gmail.com</h1>-->\r\n                  </div>\r\n               </div>\r\n\r\n            </div>\r\n        <script>\r\n        document.getElementById(\"modifica\").addEventListener(\"click\", modificaSchermata);\r\n            function salva() {\r\n                const campi = [document.querySelectorAll(\"#username\")[0], document.querySelectorAll(\"#mail\")[0], document.querySelectorAll(\"#nazionalita\")[0]];\r\n                const classi = [campi[0].classList, campi[1].classList];\r\n                const placeholders = [document.getElementById(\"userplaceholder\"), document.getElementById(\"mailplaceholder\"), document.getElementById(\"nazionalitaplaceholder\")];\r\n                const nuovo_placeHolder = [document.createElement(\"div\"), document.createElement(\"div\")];\r\n                nuovo_placeHolder[0].id = \"userplaceholder\";\r\n                nuovo_placeHolder[0].innerText = \"username\";\r\n                nuovo_placeHolder[1].id = \"mailplaceholder\";\r\n                nuovo_placeHolder[1].innerText = \"mail\";\r\n                //cambio gli input con gli h1 di prima\r\n                campi.forEach((elemento, indice)=>{\r\n                    if(elemento){\r\n                    if(indice!==2){\r\n                       const testo = elemento.value;\r\n                       const genitore = elemento.parentNode;\r\n                       const idElemento = elemento.id;\r\n                       elemento.remove();\r\n                       placeholders[indice].remove();\r\n                       const nuovo = document.createElement(\"div\");\r\n                       nuovo.innerText = testo;\r\n                       nuovo.classList=classi[indice];\r\n                       nuovo.id = idElemento;\r\n                       genitore.appendChild(nuovo);\r\n                       genitore.appendChild(nuovo_placeHolder[indice]);\r\n                    }else{\r\n                        const boxmodificanazionalita = document.getElementById(\"boxmodificanazionalita\");\r\n                        const boxnazionalita = document.getElementById(\"boxnazionalita\");\r\n                        document.getElementById('nazionalita').innerText=document.getElementById('country').value;\r\n                        boxmodificanazionalita.classList.add(\"hidden\");\r\n                        boxnazionalita.classList.remove(\"hidden\");\r\n\r\n                    }\r\n\r\n                }\r\n                });\r\n                //chiamata a API per salvare i nuovi dati inseriti\r\n                const nome=document.querySelectorAll(\"#username\")[0].innerText, mail=document.querySelectorAll(\"#mail\")[0].innerText,\r\n                    nazionalita=document.querySelectorAll(\"#nazionalita\")[0].innerText;\r\n                var xhttp = new XMLHttpRequest();\r\n                xhttp.onreadystatechange = function() {\r\n                    if (this.readyState == 4 && this.status == 200) {\r\n                       // Typical action to be performed when the document is ready:\r\n                       console.log(xhttp.responseText);\r\n                    }\r\n                };\r\n                xhttp.open(\"GET\", \"/modificaAccount?nome=\"+nome+\"&mail=\"+mail+\"&nazionalita=\"+nazionalita, true);\r\n                xhttp.send();\r\n                //cambio il bottone in modifica\r\n                const modifica = document.getElementById(\"modifica\");\r\n                modifica.innerText = \"modifica\";\r\n                modifica.removeEventListener(\"click\", salva);\r\n                modifica.addEventListener(\"click\", modificaSchermata);\r\n            }\r\n\r\n            function modificaSchermata(){\r\n            //trasformo mail e username\r\n            console.log(\"cliccato\");\r\n            const campi = [document.querySelectorAll(\"#username\")[0], document.querySelectorAll(\"#mail\")[0], document.querySelectorAll(\"#nazionalita\")[0]];\r\n            const classi = [campi[0].classList, campi[1].classList];\r\n            const placeholders = [document.getElementById(\"userplaceholder\"), document.getElementById(\"mailplaceholder\"), document.getElementById(\"nazionalitaplaceholder\")];\r\n            const nuovo_placeHolder = [document.createElement(\"div\"), document.createElement(\"div\")];\r\n            nuovo_placeHolder[0].id = \"userplaceholder\";\r\n            nuovo_placeHolder[0].innerText = \"username\";\r\n            nuovo_placeHolder[1].id = \"mailplaceholder\";\r\n            nuovo_placeHolder[1].innerText = \"mail\";\r\n            for(let i=0; i<document.getElementById(\"country\").options.length;i++){\r\n                            if(document.getElementById(\"country\").options[i].innerText===document.getElementById('nazionalita').innerText) {\r\n                                document.getElementById(\"country\").selectedIndex = i;\r\n                                break;\r\n                            }\r\n                        }\r\n            /*\r\n            nuovo_placeHolder[2].id = \"nazionalitaplaceholder\";\r\n            nuovo_placeHolder[2].innerText = \"nazionalità\";\r\n            */\r\n\r\n            campi.forEach((elemento, indice)=>{\r\n                if(elemento){\r\n                    if(indice!==2){\r\n                       const testo = elemento.innerText;\r\n                       const genitore = elemento.parentNode;\r\n                       const idElemento = elemento.id;\r\n                       elemento.remove();\r\n                       placeholders[indice].remove();\r\n                       const nuovo = document.createElement(\"input\");\r\n                       nuovo.type = \"text\";\r\n                       nuovo.value = testo;\r\n                       nuovo.classList=classi[indice];\r\n                       nuovo.id = idElemento;\r\n                       genitore.appendChild(nuovo);\r\n                       genitore.appendChild(nuovo_placeHolder[indice]);\r\n                    }else{\r\n                        const boxnazionalita = document.getElementById(\"boxnazionalita\");\r\n                        boxnazionalita.classList.add(\"hidden\");\r\n                        const boxmodificanazionalita = document.getElementById(\"boxmodificanazionalita\");\r\n                        boxmodificanazionalita.classList.remove(\"hidden\");\r\n                        for(let i=0; i<document.getElementById(\"country\").options.length;i++){\r\n                            if(document.getElementById(\"country\").options[i].innerText===document.getElementById('nazionalita').innerText) {\r\n                                document.getElementById(\"country\").selectedIndex = i;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                }\r\n            });\r\n            //dentro l'immagine ci metto un bottone cambia\r\n            //TODO: METTERE IL SELECT HIDE NORMALMENTE E SOSTITUIRLO CON UN DIV CHE DICE NAZIONALITÀ, QUANDO L'UTENTE SCHIACCIA MODIFICA DIVENTA DISPLAY BLOCK\r\n            //il tasto modifica diventa salva\r\n            const modifica = document.getElementById(\"modifica\");\r\n            modifica.innerText = \"salva\";\r\n            modifica.removeEventListener(\"click\", modificaSchermata);\r\n            modifica.addEventListener(\"click\", salva);\r\n        }\r\n        </script>\r\n\r\n    <!-- <h1>Ciao {{ username }}!</h1> -->\r\n    {% else %}\r\n    <h1>Devi prima accedere!</h1>\r\n    {% endif %}\r\n{% endblock content %}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pysurvey/app/templates/my-account.html b/pysurvey/app/templates/my-account.html
--- a/pysurvey/app/templates/my-account.html	(revision 1d2a2478d8aa65059c90be6c1814cd192b39217a)
+++ b/pysurvey/app/templates/my-account.html	(date 1629317536905)
@@ -42,7 +42,7 @@
                      </div>
                   </div>
                   <div class="m-4 flex flex-row-reverse p-8">
-                     <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold p-4 m-1 w-2/12 rounded-full" id="modifica">Modifica</button>
+                     <button class="material-icons-outlined bg-blue-500 hover:bg-blue-700 text-white font-bold p-4 m-1 w-2/12 rounded-full" id="modifica">Modifica</button>
                      <!-- <h1 class="text-2xl"> ciccio@gmail.com</h1>-->
                   </div>
                </div>
