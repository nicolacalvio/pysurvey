{% extends "base.html" %}
{% block content %}


    <div id="titoli" align="center"></div>


<script>
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
       // Typical action to be performed when the document is ready:
        let div = document.getElementById("titoli");
        try {
            let json = JSON.parse(xhttp.responseText).json_list;
            json.forEach((elemento)=>{
                let nuovo = document.createElement("div");
                nuovo.innerText = elemento.titolo;
                nuovo.id = elemento.idSurvey;
                nuovo.addEventListener("click", ()=>{
                    window.location.href = "/survey?id="+elemento.idSurvey;
                })
                div.appendChild(nuovo);
            })


        } catch (e) {
            let nuovo = document.createElement("div");
            nuovo.innerText = xhttp.responseText;
            div.appendChild(nuovo);
        }
    }
};
xhttp.open("GET", "/titoloEId", true);
xhttp.send();
</script>

{% endblock content %}